name: To-message
on:
    push:
        branches: ['master','main']
    
jobs:
    check-and-publish:
        name: "Test job"
        runs-on: ubuntu-latest
        steps:
            - name: "telegram Notification"
              uses: "appleboy/telegram-action@master"
              with:
                to: ${{ secrets.TELEGRAM_CHAT_ID }}
                token: ${{ secrets.TELEGRAM_TOKEN }}
                # args: "The ${{github.event_name}} by name actor is ${{github.actor}} on repo ${{github.repositoryUrl}} 
                #       \nall github ${{ toJson(github) }}
                #       \nall env ${{toJson(env)}}
                #       \nall job ${{ toJson(job) }}
                #       \nall steps ${{ toJson(steps) }}
                #       \nall runner ${{toJson(runner)}}
                #       \nall secrets ${{ toJson(secrets) }}
                #       \nall strategy ${{ toJson(strategy) }}
                #       \nall matrix ${{ toJson(matrix) }}
                #       \nall needs ${{ toJson(needs) }}
                #       \nall inputs ${{ toJson(inputs) }}"
                args: "The ${{github.event_name}} by name actor is ${{github.actor}} on repo ${{github.repositoryUrl}}
                       \npre-commit:${{github.event.before}} and him url https://github.com/Petr16/webhook-test/commit/${{github.event.before}}
                       \nnow-commit:${{github.event.after}} and him url https://github.com/Petr16/webhook-test/commit/${{github.event.after}}
                       \nname:${{github.event.commits[0].message}}
                       \ntime:${{github.event.commits[0].timestamp}}
                       \nautor:${{toJson(github.event.commits[0].author)}}
                       \ncommitter:${{toJson(github.event.commits[0].committer)}}
                       \ncompare:${{github.event.compare}}
                       \npusher:${{toJson(github.event.pusher)}}"



